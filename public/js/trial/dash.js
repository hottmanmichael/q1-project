"use strict";!function(){function e(){t(),a()}function t(){var e=document.getElementById("page-title-artist-name");e.innerHTML=u.name}function a(){function e(e){var t=document.querySelector(".iframe-box.spotify-embed"),a=document.createElement("iframe");a.src="https://embed.spotify.com/?uri="+e,a.width="100%",a.height="100%",a.frameborder="0",a.style.border="none",a.allowtransparency="true",t.appendChild(a)}function t(){var e="album_type=album,single",t="&limit=10";new Ajax("GET",l+"/artists/"+u.id+"/albums?"+e+t,function(e,t){for(var n=0;n<t.items.length;n++)i(t.items[n],o.HEAR_IT.querySelector("#wheel-albums"));a(t.items)},null)}function a(e){var t=e.shift();new Ajax("GET",l+"/albums/"+t.id+"/tracks",function(t,n){return e.length>0?(s.push(n.items),void a(e)):void 0},null);var n=o.HEAR_IT.querySelector("#wheel-tracks");for(var r in s)for(var t=s[r],c=0;c<t.length;c++)i(t[c],n)}function i(e,t){var a=document.createElement("div");a.className=e.type+"-list-item",a.style.overflow="hidden";var i=document.createElement("h3");if(i.className="name","album"===e.type?("album"!==e.album_type&&(i.innerHTML=e.name+" ("+e.type+")"),i.innerHTML=e.name):i.innerHTML=e.name,"track"!==e.type&&e.images.length>0){var r=document.createElement("img");r.className="thumbnail",r.src=e.images[0].url,r.alt=e.name,r.height="40",r.width="40",a.appendChild(r)}var l=document.createElement("i");l.className="fa fa-play-circle-o play-item "+e.type,l.uri=e.uri,l.addEventListener("click",n),a.appendChild(i),a.appendChild(l),t.appendChild(a)}var r=l+"/artists/"+u.id;new Ajax("GET",r,function(a,n){e(n.uri),t()},null);var s=[]}function n(e){document.querySelector("iframe").src="https://embed.spotify.com/?uri="+e.target.uri,i()}function i(){document.body.scrollTop=s}function r(){for(var e=0;e<v.length;e++)v[e].addEventListener("click",function(e){if(!e.target.classList.contains("active")){for(var t=0;t<d.length;t++)d[t].classList.contains("active")&&(d[t].classList.remove("active"),v[t].classList.remove("active"));console.log("e.target.for:",e.target.attributes.isFor.value);var a=e.target.attributes.isFor.value,n=document.getElementById("wheel-"+a);n.className+=" active fade",setTimeout(function(){n.classList.remove("fade")},10),e.target.className+=" active fade",setTimeout(function(){e.target.classList.remove("fade")},10)}})}const l="https://api.spotify.com/v1",o={HEAR_IT:document.getElementById("hearit"),SEE_IT:document.getElementById("seeit"),SING_IT:document.getElementById("singit"),DISCOVER_IT:document.getElementById("discoverit")},s=590;var c=new User;c.authenticated()||c.create(),c.establish(c.fetchLocal("MODEL")),console.log("user on page load and setup: ",c);var m=c.fetchLocal("CURRENT_ARTIST");console.log("artistFromStorage: ",m);var u=new Artist(m.id,m.name,m.slug);console.log("PAGE_ARTIST: ",u),e();var d=document.querySelectorAll(".wheel-item"),v=document.querySelectorAll(".content-wheel .navigation .list .item");r();var f=document.querySelector("header");window.addEventListener("scroll",function(){window.scrollY>50?f.classList.contains("darken")||(f.className+=" darken"):f.classList.remove("darken")})}();