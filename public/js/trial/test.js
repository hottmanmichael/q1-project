"use strict";!function(){function e(e){""===e.target.value?s():(window.clearTimeout(c),c=setTimeout(function(){t(e.target.value)},u))}function t(e){if(null!==e&&""!==e){var t="https://api.spotify.com/v1/search?",a="&type=artist",i="&offset=0",l="&limit=8",o="query="+e.replace(/(\s)/g,"%20"),c=t+o+i+l+a;new Ajax("GET",c,function(e,t){console.log("err: ",e),e?r(e):(console.log("res: ",t),s(),n(t))},null)}}function n(e){if(e.artists.items.length>0)for(var t=0;t<e.artists.items.length;t++)a(e.artists.items[t]);else a(null)}function a(e){var t=document.createElement("div");t.className="artist-box",t.hasArtist=!1;var n=document.createElement("h3");if(n.className="name",null===e)n.innerHTML="No artist found...";else if(t.hasArtist=!0,t.id=e.id,t.name=e.name,n.innerHTML=e.name,e.images.length>0){var a=document.createElement("img");a.className="thumbnail",a.style.backgroundColor="rgb(106, 106, 106)",a.src=e.images[0].url,a.alt=e.name,t.appendChild(a)}t.addEventListener("click",function(e){i(e,null)}),t.appendChild(n),m.appendChild(t),setTimeout(function(){t.classList.remove("fade")},10)}function s(){for(;m.children.length>0;)m.firstChild.remove()}function i(e,t){var n;if(n=0===e.target.children.length?e.target.parentElement:e.target,console.log("has artist: ",n.hasArtist),n.hasArtist){var a={id:n.id,name:n.name,slug:n.name.replace(/\s/g,"-").toLowerCase()};l.setLocal("CURRENT_ARTIST",a);var s="/dash.html",i="?"+a.slug;window.location.assign(s+i)}}function r(){}var l=new User;l.authenticated()||l.create(),l.establish(l.fetchLocal("MODEL")),console.log("user: ",l);var o=document.getElementById("main-artist-search"),c=window.setTimeout(t(null),0);const u=350;o.addEventListener("keyup",e);var m=document.querySelector("#artist-search .digest");console.log("searchDigest: ",m)}();